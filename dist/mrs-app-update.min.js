/*! mrs-app-update - v1.0.0 - 2015-11-03 12:35:06 GMT */
angular.module("MRS.App.Update",["MRS.App.Core","MRS.App.Helper","MRS.App.Device"]).config(["$mrsappupdateConfig",function(a){"use strict";var b={DEBUG:!1,check:{autoStart:!0,interval:216e5},endpoints:{check:{method:"POST",cache:!0,timestamp:216e5}}},c=angular.merge({},b,a);angular.merge(a,c)}]),angular.module("MRS.App.Update").service("MRSAppUpdate.Adapter",[function(){"use strict";this.check={to:function(a){return a.data={os:a.data.device.os,osVersion:a.data.device.osVersion,appVersion:a.data.appVersion},a}}}]),angular.module("MRS.App.Update").provider("MRSAppUpdate",function(){"use strict";var a,b,c,d="MRS_APP_UPDATE.onInvalidVersion";this.setAppVersion=function(a){b=a},this.$get=["$mrsappupdateConfig","$log","$interval","MRSAppUpdate.Service","MRSAppDevice","eventPublisher",function(e,f,g,h,i,j){var k=this;return this.startChecking=function(b){function c(){k.checkForUpdates().then(function(a){a&&a.valid===!1&&j.publish(d,a.latestVersion)})}a&&(g.cancel(a),a=void 0),a=g(c,b)},this.checkForUpdates=function(){function a(a){return a}function d(a){throw a}return c||(c=i.getLocalDeviceInformation()),h.check({device:c,appVersion:b}).then(a)["catch"](d)},this.isRunning=function(){return void 0!==a},e.check&&e.check.autoStart&&e.check.interval&&this.startChecking(e.check.interval),{start:k.startChecking,check:k.checkForUpdates,isRunning:k.isRunning}}]}),angular.module("MRS.App.Update").factory("MRSAppUpdate.Service",["$mrsappupdateConfig","MRSAppHelper.Service","MRSAppUpdate.Adapter",function(a,b,c){"use strict";return b.serviceBuilderWithDefaultConvention(c,a.endpoints,["check"])}]);
//# sourceMappingURL=mrs-app-update.min.js.map